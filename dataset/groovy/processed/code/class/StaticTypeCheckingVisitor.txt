static type check visitor boolean valu system properti groovi stc debug fals atom long error collector class class helper iter class collect empti list class helper type check class class node class helper type check type check info class class helper default groovi method class constant express true getter method deleg getter method owner getter method object class helper deleg class class helper deleg target class link hash map class closur param class map entri class enumer class empti statement string return listen return adder return statement listen public void return statement ad final return statement return statement class node return type check return type return statement return statement express equal constant express return type check context enclos closur null add closur return type type return statement express els type check context enclos method null els throw groovi bug error unexpect return statement return statement line number return statement column number return statement text return adder return adder return listen type check context extens static type check visitor sourc creat default type check extens sourc unit initi type check context add type check extens extens set compil unit visit class node skip class node node type check annot skip mode node skip class node visit class express express add privat field method access sourc type access member check mark privat access sourc check mark privat access sourc check super call closur call direct call target type class store type vexp store type super vexp visit variabl express vexp tri variabl express properti vexp dyn visit properti express silent lhs part visit properti express pexp enclos assign express visit attribut express express visit rang express express visit binari express express ensur valid setter express left express express setter info origin declar type lhs infer diamond type cce type push instanc type info object instanc type express type check multipl assign continu left express express adjust type spread infer express type left express ad read onli properti error expr add precis error left redirect lhs type inferredrh type express add list assign constructor error left redirect left express type infer express type express assign express add map assign constructor error left redirect left express express check type generic left express type wrap express string string error left express type wrap express type check assign assign express left express left express type express infer express type check groovi constructor map receiv receiv type map express incomplet generic type info infer express type check groovi style constructor node argument check groovi style constructor node argument sourc extract temporari type info key express find current instanc class expr type exist properti pexp check read onli exist properti pexp read mode visitor type spread express test class object express type pexp type list properti express test class object express type pexp type map properti express test class object express type pexp static access member member static onli store resolv type resolv receiv declar class static express store store field field return true field exist express store receiv visitor deleg data store properti properti node express store receiv visitor deleg data store infer type properti express pexp flat infer type setter pexp visit properti node visit field node visit loop loop infer loop element type collect type pass control structur var orig type tracker visit loop loop visit bitwis negat express express visit unari express express visit unari express express visit postfix express express visit prefix express express math widen class node type visit prefix postif express origin express oper type negat posit unari express visit constructor method node constructor visit return statement statement check return type statement add closur return type return type visit constructor call express call type check map constructor call receiv argument argument type arg visit closur express express wrap closur type return type deleg metadata express restor variabl express metadata type befor visit save variabl express metadata closur share express type befor visit skip method node node visit method node visit constructor node start method infer node collector add type check info annot node visit static method call express call check closur paramet call argument receiv silent visit method node direct method call candid visit method call argument receiv argument visit closur select method infer closur paramet type receiv argument express param select method infer type param receiv method paramet origin method call argument open block signatur hint express select method hint class option transform loader infer closur paramet type receiv argument express select method hint class option resolv generic type hint receiv argument select method signatur creat usabl class node generic type generic type convert string array option check closur deleg receiv argument param express param add receiv receiv owner implicit visit method call express call adjust trait direct method call candid receiv arg return type add array method method receiv arg infer return type closur argument call argument owner list object express add type receiv owner check forbidden spread argument argument list temporari type express object express store target method call direct method call candid closur call object express argument type check closur call call argument arg paramet visit els els visit switch statement visit case statement statement restor type befor condit pop assign track tracker push assign track visit cast express express deleg owner closur exp check cast target type sourc visit ternari express express visit tri catch final statement store type exp result type left expr infer type generic assign sam usag sam closur type closur express group oper result type infer compon type type index type find method fail expr receiv arg disambigu method method receiv arg type expr pretti print method list node categori method call method arg find method generat receiv add generat method receiv method find method receiv arg extract properti method prefix method collect interfac method receiv method type exp generic resolv type field properti type super trait store infer return type node type infer return type exp infer list express type list null constant express infer map express type map infer return type generic receiv method argument infer return type generic receiv method argument explicit type hint resolv placehold explicit type hint method explicit type hint resolv placehold extract generic connect super class interfac resolv placehold connect convert closur type type express closur type sam type placehold resolv generic context resolv placehold current type declar class method argument resolv place holder declar receiv declar method static target generic place holder array extract place holder method receiv declar class type check method generic fail receiv argument candid method locat method generic type string node format argument list node put setter info exp info remov setter info exp add error msg expr add static type error msg expr add match method error receiv arg call add ambigu error messag method arg expr add categori method call error call add assign error left type type assign express add unsupport pre postfix express error express set method visit method visit perform pass extract type paramet paramet wrap type necessari type class class equal check start return current type check context context intern type checker dure type check store state data return type check context return list type check annot class node subclass overrid method order provid addit class check method class node skip default implement return link type check return array class node test node class node check enclos method skip param node return true class node skip field node check call privat field class method node check call privat method class wrap type class class true binari express correspond assign check type match possibl setter throw type check error param express assign express param left express left express assign param express express assign param setter info possibl setter return true type check pass store inform type object instanceof instanceof type express visit param object instanc express check instanceof param type express express repres target type check constructor style express valid regard number argument argument type param node class node tri find match constructor param argument constructor argument deprec link check groovi style constructor org codehaus groovi ast class node org codehaus groovi ast class node org codehaus groovi ast node check constructor style express valid regard number argument argument type param node class node tri find match constructor param argument constructor argument instanceof check code store temporari type inform data link type check context temporari branch type inform tabl method comput key store type info param express express comput key return key link type check context temporari branch type inform helper method determin receiv class error messag field attribut return type class depend temporari type inform availbl due instanceof check singl candid case param expr express unknown field param type type express fallback type return temporari inform avail onli type return temporari type class otherwis fall provid type class check properti exist receiv ani possibl receiv class temporari type inform tabl param pexp properti express param read mode true properti read els properti set param visitor null properti node visit provid visitor return true properti defin ani possibl receiv class method filter search result null match filter illeg access instanc member static context return null member static access static static onli true access static alway return member sinc access static member static member loop collect type return infer type loop element exampl infer element type list loop param collect type type collect return infer compon type deprec method unus replac link deleg infer param call argument param receiv visit method call target infer type don report error visit method call method respons perform type infer closur argument type whenev code code foo collect upper case code case type checker tri find code collect code method link closur argument annot link groovi transform stc closur param addit type infer perform type code code infer param receiv param argument param express closur express argument type infer param param paramet link groovi transform stc closur param annot param select method method accept closur generic type instanc return class node infer type param generic type link org codehaus groovi ast generic type repres type placehold wildcard return class node usabl infer type special method handl trait call type checker type signatur abl trait detect class node creat repres list trait interfac param direct method call candid method select type checker param receiv receiv method call param arg argument method call param return type origin return type infer type checker return fix return type select method link org codehaus groovi runtim default groovi method trait object class trait add set method primit array param receiv receiv class param method param arg argument class case object call method suppos retriev infer closur return type param call argument argument list object closur call singl closur express return infer closur return type null object express receiv express generat list potenti receiv type param object express receiv express return list type receiv method return list method suppli paramet defin specifi receiv add exist method generat afterward compil exampl method default valu specifi class node isn compil param receiv receiv find method param method return return method defin receiv complet stub futur method method prefix return properti follow java bean rule exampl return full return full prefix return null param prefix method prefix set param method method return properti prefix method match java bean rule null otherwis resolv field properti node generic current class declar class extract generic symbol param field node properti node param type origin type return class node correct generic store infer return type closur method separ key store infer return type becaus infer type closur link closur differ infer type code closur param node link closur express link method node param type infer return type code return valu infer type return infer return type closur method store node method doesn perform ani type infer param exp link closur express link method node return infer type store node metadata method call return parameter type perform addit infer return type type actual type paramet exampl method array list generifi type deduc actual type argument param method method node param argument method call argument return parameter infer class node method call return parameter type perform addit infer return type type actual type paramet exampl method array list generifi type deduc actual type argument param method method node param argument method call argument param explicit type hint explicit type hint exampl collect string empti list return parameter infer class node method convert closur type appropri type infer return type generic param closur type infer type closur closur closur return type param sam type type closur coerc return type complet inform closur node return wrap type onli provid class node primit type method differ link class helper wrapper org codehaus groovi ast class node return instanc provid type generic type param type return wrap type main class code visitor respons static type check perform inspect check assign type type infer eventu class node annot infer type inform author cedric champeau author jochen theodorou 