add support pluggabl accumul function today hour develop someth quit abil extern code function accumul basic idea common function predefin templat code everi accumul everi rule rule base exampl averag idea write someth bellow everi rule avg number accumul chee price price init doubl total int count action total price count rever total price count result doubl total count user simpli predefin function avg number accumul chee price price averag price cost give rai employ depart sum number accumul employ dept salari salari sum salari whatev user hardcod function thought pluggabl defin simpl interfac accumul function anyon creat extern function simpli implement interfac wire packag builder configur configur file mark creat exampl drool accumul function averag org drool base accumul averag accumul drool accumul function constant prefix averag function identifi user rule file provid common function averag sum count min max box sinc realli easi implement ani function exampl implement averag function packag org drool base accumul implement accumul capabl calcul averag valu author etirelli public class averag accumul implement accumul function protect static class averag data public int count public doubl total javadoc org drool base accumul accumul function creat context public object creat context return averag data javadoc org drool base accumul accumul function init java lang object public void init object context throw averag data data averag data context data count data total javadoc org drool base accumul accumul function accumul java lang object java lang object public void accumul object context object valu averag data data averag data context data count data total number valu doubl valu javadoc org drool base accumul accumul function rever java lang object java lang object public void rever object context object valu throw averag data data averag data context data count data total number valu doubl valu javadoc org drool base accumul accumul function result java lang object public object result object context throw averag data data averag data context return doubl data count data total data count javadoc org drool base accumul accumul function support rever public boolean support rever return true 