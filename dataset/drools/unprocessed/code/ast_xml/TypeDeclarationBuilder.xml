<Class>
    <Id>2410</Id>
    <Package>org.drools.compiler.builder.impl</Package>
    <ClassName>TypeDeclarationBuilder</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface></SuperInterface>
    </SuperInterfaceList>
    <ClassComment></ClassComment>
    <FieldList>
        <Field>
            <FieldName>kbuilder</FieldName>
            <FieldType>KnowledgeBuilderImpl</FieldType>
        </Field>
        <Field>
            <FieldName>generatedTypes</FieldName>
            <FieldType>Set</FieldType>
        </Field>
        <Field>
            <FieldName>generatedTypes</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>classDeclarationExtractor</FieldName>
            <FieldType>TypeDeclarationCache</FieldType>
        </Field>
        <Field>
            <FieldName>typeDeclarationNameResolver</FieldName>
            <FieldType>TypeDeclarationNameResolver</FieldType>
        </Field>
        <Field>
            <FieldName>typeDeclarationFactory</FieldName>
            <FieldType>TypeDeclarationFactory</FieldType>
        </Field>
        <Field>
            <FieldName>classDefinitionFactory</FieldName>
            <FieldType>ClassDefinitionFactory</FieldType>
        </Field>
        <Field>
            <FieldName>typeDeclarationConfigurator</FieldName>
            <FieldType>TypeDeclarationConfigurator</FieldType>
        </Field>
        <Field>
            <FieldName>declaredClassBuilder</FieldName>
            <FieldType>DeclaredClassBuilder</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>TypeDeclarationBuilder</MethodName>
            <MethodComment></MethodComment>
            <ReturnType></ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>kbuilder</ParamName>
                    <ParamType>KnowledgeBuilderImpl</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getAndRegisterTypeDeclaration</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>TypeDeclaration</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>cls</ParamName>
                    <ParamType>?</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>packageName</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getExistingTypeDeclaration</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>TypeDeclaration</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>className</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getTypeDeclaration</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>TypeDeclaration</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>cls</ParamName>
                    <ParamType>?</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>removeTypesGeneratedFromResource</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>resource</ParamName>
                    <ParamType>Resource</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>Collection&lt;String&gt; [removedTypes=classDeclarationExtractor.removeTypesGeneratedFromResource(resource)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>generatedTypes;removeAll;[removedTypes]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>registerGeneratedType</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>typeDescr</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [fullName=typeDescr.getType().getFullName()]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>generatedTypes;add;[fullName]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>processTypeDeclarations</MethodName>
            <MethodComment>/** 
 * 1) Process the TypeDeclaration Descriptors Resolve names Normalize field descriptors
 */
</MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>packageDescrs</ParamName>
                    <ParamType>? extends PackageDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unsortedDescrs</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unresolvedTypes</ParamName>
                    <ParamType>TypeDefinition</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unprocesseableDescrs</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>packageDescrs;forEach;[kbuilder::getOrCreatePackageRegistry]</InnerMethodInvoke>
                <InnerMethodInvoke>packageDescrs;forEach;[this::setResourcesInDescriptors]</InnerMethodInvoke>
                <InnerMethodInvoke>typeDeclarationNameResolver;resolveTypes;[packageDescrs, unresolvedTypes]</InnerMethodInvoke>
                <InnerMethodInvoke>packageDescrs;forEach;[this::normalizeForeignPackages]</InnerMethodInvoke>
                <InnerMethodInvoke>null;processUnresolvedTypes;[null, null, unsortedDescrs, unresolvedTypes, unprocesseableDescrs]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>processTypeDeclarations</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>packageDescr</ParamName>
                    <ParamType>PackageDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>pkgRegistry</ParamName>
                    <ParamType>PackageRegistry</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unsortedDescrs</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unresolvedTypes</ParamName>
                    <ParamType>TypeDefinition</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unprocesseableDescrs</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>null;setResourcesInDescriptors;[packageDescr]</InnerMethodInvoke>
                <InnerMethodInvoke>typeDeclarationNameResolver;resolveTypes;[packageDescr, unresolvedTypes, pkgRegistry.getTypeResolver()]</InnerMethodInvoke>
                <InnerMethodInvoke>null;normalizeForeignPackages;[packageDescr]</InnerMethodInvoke>
                <InnerMethodInvoke>null;processUnresolvedTypes;[packageDescr, pkgRegistry, unsortedDescrs, unresolvedTypes, unprocesseableDescrs]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>processUnresolvedTypes</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>packageDescr</ParamName>
                    <ParamType>PackageDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>pkgRegistry</ParamName>
                    <ParamType>PackageRegistry</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unsortedDescrs</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unresolvedTypes</ParamName>
                    <ParamType>TypeDefinition</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unprocesseableDescrs</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>ClassHierarchyManager [classHierarchyManager=new ClassHierarchyManager(unsortedDescrs,kbuilder)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getPackageRegistry</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>PackageRegistry</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>pkgRegistry</ParamName>
                    <ParamType>PackageRegistry</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>packageDescr</ParamName>
                    <ParamType>PackageDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>typeDescr</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>compactDefinitionsAndDeclarations</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>AbstractClassTypeDeclarationDescr</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>unsortedDescrs</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unprocesseableDescrs</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>Map&lt;String,AbstractClassTypeDeclarationDescr&gt; [compactedUnsorted=new HashMap&lt;String,AbstractClassTypeDeclarationDescr&gt;(unsortedDescrs.size())]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>mergeTypeDescriptors</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>prev</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>descr</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>boolean [isDef1=isDefinition(prev)]</InnerVar>
                <InnerVar>boolean [isDef2=isDefinition(descr)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>isDefinition</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>prev</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>setResourcesInDescriptors</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>packageDescr</ParamName>
                    <ParamType>PackageDescr</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>createBean</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>typeDescr</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>pkgRegistry</ParamName>
                    <ParamType>PackageRegistry</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>hierarchyManager</ParamName>
                    <ParamType>ClassHierarchyManager</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unresolvedTypes</ParamName>
                    <ParamType>TypeDefinition</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>unprocesseableDescrs</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>TypeDeclaration [type=typeDeclarationFactory.processTypeDeclaration(pkgRegistry,typeDescr)]</InnerVar>
                <InnerVar>boolean [success=!kbuilder.hasErrors()]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>normalizeForeignPackages</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>packageDescr</ParamName>
                    <ParamType>PackageDescr</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>Map&lt;String,PackageDescr&gt; [foreignPackages=null]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>updateTraitInformation</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>typeDescr</ParamName>
                    <ParamType>AbstractClassTypeDeclarationDescr</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>type</ParamName>
                    <ParamType>TypeDeclaration</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>def</ParamName>
                    <ParamType>ClassDefinition</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>pkgRegistry</ParamName>
                    <ParamType>PackageRegistry</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>updateTraitDefinition</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>type</ParamName>
                    <ParamType>TypeDeclaration</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>concrete</ParamName>
                    <ParamType>Class</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>asTrait</ParamName>
                    <ParamType>boolean</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>ClassDefinitionFactory;populateDefinitionFromClass;[type.getTypeClassDef(), type.getResource(), concrete, asTrait]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>