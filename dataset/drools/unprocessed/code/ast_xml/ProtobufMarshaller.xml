<Class>
    <Id>1669</Id>
    <Package>org.drools.core.marshalling.impl</Package>
    <ClassName>ProtobufMarshaller</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface>InternalMarshaller</SuperInterface>
    </SuperInterfaceList>
    <ClassComment>ProtobufMarshaller  /** 
 * A Marshaller implementation that uses ProtoBuf as the marshalling framework in order to support backward compatibility with marshalled sessions
 */
</ClassComment>
    <FieldList>
        <Field>
            <FieldName>initializer</FieldName>
            <FieldType>KieSessionInitializer</FieldType>
        </Field>
        <Field>
            <FieldName>TIMER_READERS</FieldName>
            <FieldType>Map</FieldType>
        </Field>
        <Field>
            <FieldName>TIMER_READERS</FieldName>
            <FieldType>Integer</FieldType>
        </Field>
        <Field>
            <FieldName>kbase</FieldName>
            <FieldType>KieBase</FieldType>
        </Field>
        <Field>
            <FieldName>ruleBaseConfig</FieldName>
            <FieldType>RuleBaseConfiguration</FieldType>
        </Field>
        <Field>
            <FieldName>marshallingConfig</FieldName>
            <FieldType>MarshallingConfiguration</FieldType>
        </Field>
        <Field>
            <FieldName>strategyStore</FieldName>
            <FieldType>ObjectMarshallingStrategyStore</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>getInitializer</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>KieSessionInitializer</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>setInitializer</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>initializer</ParamName>
                    <ParamType>KieSessionInitializer</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>ProtobufMarshaller</MethodName>
            <MethodComment></MethodComment>
            <ReturnType></ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>kbase</ParamName>
                    <ParamType>KieBase</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>marshallingConfig</ParamName>
                    <ParamType>MarshallingConfiguration</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>unmarshall</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>StatefulKnowledgeSession</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>stream</ParamName>
                    <ParamType>InputStream</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
                <ExceptionType>ClassNotFoundException</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>unmarshall</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>StatefulKnowledgeSession</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>stream</ParamName>
                    <ParamType>InputStream</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>config</ParamName>
                    <ParamType>KieSessionConfiguration</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>environment</ParamName>
                    <ParamType>Environment</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>MarshallerReaderContext [context=new MarshallerReaderContext(stream,(KnowledgeBaseImpl)kbase,RuleBaseNodes.getNodeMap((KnowledgeBaseImpl)kbase),this.strategyStore,TIMER_READERS,this.marshallingConfig.isMarshallProcessInstances(),this.marshallingConfig.isMarshallWorkItems(),environment)]</InnerVar>
                <InnerVar>int [id=((KnowledgeBaseImpl)this.kbase).nextWorkingMemoryCounter()]</InnerVar>
                <InnerVar>RuleBaseConfiguration [conf=((KnowledgeBaseImpl)this.kbase).getConfiguration()]</InnerVar>
                <InnerVar>StatefulKnowledgeSessionImpl [session=ProtobufInputMarshaller.readSession(context,id,environment,(SessionConfiguration)config,initializer)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>context;close;[]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
                <ExceptionType>ClassNotFoundException</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>unmarshall</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>stream</ParamName>
                    <ParamType>InputStream</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>ksession</ParamName>
                    <ParamType>KieSession</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>MarshallerReaderContext [context=new MarshallerReaderContext(stream,(KnowledgeBaseImpl)kbase,RuleBaseNodes.getNodeMap((KnowledgeBaseImpl)kbase),this.strategyStore,TIMER_READERS,this.marshallingConfig.isMarshallProcessInstances(),marshallingConfig.isMarshallWorkItems(),ksession.getEnvironment())]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>ProtobufInputMarshaller;readSession;[(StatefulKnowledgeSessionImpl)ksession, context]</InnerMethodInvoke>
                <InnerMethodInvoke>context;close;[]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
                <ExceptionType>ClassNotFoundException</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>marshall</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>stream</ParamName>
                    <ParamType>OutputStream</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>ksession</ParamName>
                    <ParamType>KieSession</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>null;marshall;[stream, ksession, ksession.&lt;SessionClock&gt;getSessionClock().getCurrentTime()]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>marshall</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>stream</ParamName>
                    <ParamType>OutputStream</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>ksession</ParamName>
                    <ParamType>KieSession</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>clockTime</ParamName>
                    <ParamType>long</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>MarshallerWriteContext [context=new MarshallerWriteContext(stream,(InternalKnowledgeBase)kbase,(InternalWorkingMemory)ksession,RuleBaseNodes.getNodeMap((InternalKnowledgeBase)kbase),this.strategyStore,this.marshallingConfig.isMarshallProcessInstances(),this.marshallingConfig.isMarshallWorkItems(),ksession.getEnvironment())]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>((InternalWorkingMemory)ksession);flushPropagations;[]</InnerMethodInvoke>
                <InnerMethodInvoke>ProtobufOutputMarshaller;writeSession;[context]</InnerMethodInvoke>
                <InnerMethodInvoke>context;close;[]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getMarshallingConfiguration</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>MarshallingConfiguration</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>