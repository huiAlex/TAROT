<Class>
    <Id>294</Id>
    <Package>org.apache.derbyTesting.functionTests.tests.upgradeTests</Package>
    <ClassName>AdditionalDb</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface></SuperInterface>
    </SuperInterfaceList>
    <ClassComment></ClassComment>
    <FieldList>
        <Field>
            <FieldName>ADDITIONAL_DBS</FieldName>
            <FieldType>AdditionalDb[]</FieldType>
        </Field>
        <Field>
            <FieldName>logicalName</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>shutDown</FieldName>
            <FieldType>boolean</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>suite</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>Test</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>version</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>useCreateOnUpgrade</ParamName>
                    <ParamType>boolean</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>ClassLoader [oldLoader=makeClassLoader(version)]</InnerVar>
                <InnerVar>BaseTestSuite [suite=new BaseTestSuite("Upgrade Tests from " + getTextVersion(version))]</InnerVar>
                <InnerVar>TestSetup [setup=TestConfiguration.singleUseDatabaseDecorator(suite)]</InnerVar>
                <InnerVar>Properties [preReleaseUpgrade=new Properties()]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>BaseTestCase;traceit;["Prepare to run upgrade tests from " + getTextVersion(version)]</InnerMethodInvoke>
                <InnerMethodInvoke>preReleaseUpgrade;setProperty;["derby.database.allowPreReleaseUpgrade", "true"]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>baseSuite</MethodName>
            <MethodComment>/** 
 * Add the tests from the various Changes classes (sub-classes of UpgradeChange) to the base suite which corresponds to a single phase of a run against an old database version. &lt;BR&gt; Changes are only added if the old version is older than then version the changes represent. Thus Changes10_2 is not added if the old database (upgrade from) is already at 10.2, since Changes10_2 is intended to test upgrade from an older version to 10.2. &lt;BR&gt; This is for two reasons: &lt;OL&gt; &lt;LI&gt; Prevents an endless increase in number of test cases that do no real testing.  &lt;LI&gt; Simplifies test fixtures by allowing them to focus on cases where testing is required, and not handling all future situations. &lt;/OL&gt;
 */
</MethodComment>
            <ReturnType>Test</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>name</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>phase</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>version</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>BaseTestSuite [suite=new BaseTestSuite(name)]</InnerVar>
                <InnerVar>int [oldMajor=version[0]]</InnerVar>
                <InnerVar>int [oldMinor=version[1]]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>suffersFromDerby4835or5289</MethodName>
            <MethodComment>/** 
 * Check if a version suffers from DERBY-4835 or DERBY-5289.
 */
</MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>version</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>lessThan</MethodName>
            <MethodComment>/** 
 * Return true if and only if the left version is less than the right version.
 */
</MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>left</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>right</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>handleJavaSE6</MethodName>
            <MethodComment>/** 
 * When running against certains old releases in Java SE 6 we need to setup the connections to the old database to not use the specific JDBC 4 datasources (e.g. EmbeddedDataSource40). (Since they don't exist in the old release).
 */
</MethodComment>
            <ReturnType>Test</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>phase</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>version</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>test</ParamName>
                    <ParamType>Test</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>boolean [oldReleaseNeedsJDBC3=false]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>runDataBaseMetaDataTest</MethodName>
            <MethodComment>/** 
 * Adds a subset of the tests from DatabaseMetaDataTest to the test suite. &lt;p&gt; We want to run DatabaseMetaDataTest, but it includes some features not supported in older versions, so we cannot just add the DatabaseMetaDataTest.class as is. Note also, that this does not execute fixture initialCompilationTest.
 */
</MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>suite</ParamName>
                    <ParamType>BaseTestSuite</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>oldMinor</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>BaseTestSuite [dmdSuite=new BaseTestSuite("DatabaseMetaData subsuite")]</InnerVar>
                <InnerVar>Method[] [methods=DatabaseMetaDataTest.class.getMethods()]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>suite;addTest;[TestConfiguration.changeUserDecorator(dmdSuite,"DMDT","DMDT")]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>AdditionalDb</MethodName>
            <MethodComment></MethodComment>
            <ReturnType></ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>logicalName</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>shutDown</ParamName>
                    <ParamType>boolean</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>