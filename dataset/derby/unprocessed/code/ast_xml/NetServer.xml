<Class>
    <Id>1753</Id>
    <Package>org.apache.derbyTesting.functionTests.harness</Package>
    <ClassName>NetServer</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface></SuperInterface>
    </SuperInterfaceList>
    <ClassComment></ClassComment>
    <FieldList>
        <Field>
            <FieldName>homeDir</FieldName>
            <FieldType>File</FieldType>
        </Field>
        <Field>
            <FieldName>jvmName</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>clPath</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>javaCmd</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>jvmflags</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>framework</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>appsRequiredPassword</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>timeout</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>hostName</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>frameworkInfo</FieldName>
            <FieldType>Object[]</FieldType>
        </Field>
        <Field>
            <FieldName>port</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>pr</FieldName>
            <FieldType>Process</FieldType>
        </Field>
        <Field>
            <FieldName>outSaver</FieldName>
            <FieldType>BackgroundStreamSaver</FieldType>
        </Field>
        <Field>
            <FieldName>errSaver</FieldName>
            <FieldType>BackgroundStreamSaver</FieldType>
        </Field>
        <Field>
            <FieldName>fosOut</FieldName>
            <FieldType>FileOutputStream</FieldType>
        </Field>
        <Field>
            <FieldName>fosErr</FieldName>
            <FieldType>FileOutputStream</FieldType>
        </Field>
        <Field>
            <FieldName>startServer</FieldName>
            <FieldType>boolean</FieldType>
        </Field>
        <Field>
            <FieldName>networkServer</FieldName>
            <FieldType>Object</FieldType>
        </Field>
        <Field>
            <FieldName>pingMethod</FieldName>
            <FieldType>Method</FieldType>
        </Field>
        <Field>
            <FieldName>NETWORK_SERVER_CLASS_NAME</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>m</FieldName>
            <FieldType>Hashtable</FieldType>
        </Field>
        <Field>
            <FieldName>m</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>PREFIX_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>SUFFIX_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>DRIVER_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>PORT_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>START_CMD_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>STOP_CMD1_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>STOP_CMD2_POS</FieldName>
            <FieldType>int</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>NetServer</MethodName>
            <MethodComment></MethodComment>
            <ReturnType></ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>homeDir</ParamName>
                    <ParamType>File</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>jvmName</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>clPath</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>javaCmd</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>jvmflags</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>framework</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>startServer</ParamName>
                    <ParamType>boolean</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>appsRequiredPassword</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>Exception</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>start</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar>String[] [startcmd=(String[])frameworkInfo[START_CMD_POS]]</InnerVar>
                <InnerVar>String [homeDirName=homeDir.getCanonicalPath()]</InnerVar>
                <InnerVar>jvm [jvm=null]</InnerVar>
                <InnerVar>Vector&lt;String&gt; [jvmProps=new Vector&lt;String&gt;()]</InnerVar>
                <InnerVar>Vector&lt;String&gt; [vCmd=jvm.getCommandLine()]</InnerVar>
                <InnerVar>String [serverCmd[]=new String[vCmd.size()]]</InnerVar>
                <InnerVar>File [out=new File(homeDir,framework + ".out")]</InnerVar>
                <InnerVar>File [err=new File(homeDir,framework + ".err")]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>(new File(homeDir,framework + "Server"));mkdir;[]</InnerMethodInvoke>
                <InnerMethodInvoke>jvmProps;addElement;["derby.system.home=" + homeDirName]</InnerMethodInvoke>
                <InnerMethodInvoke>jvm;setD;[jvmProps]</InnerMethodInvoke>
                <InnerMethodInvoke>jvm;setSecurityProps;[]</InnerMethodInvoke>
                <InnerMethodInvoke>System.out;println;[""]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>Exception</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>testNetworkServerConnection</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>pingMethod;invoke;[networkServer]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>Exception</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>stop</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar>jvm [jvm=null]</InnerVar>
                <InnerVar>Vector&lt;String&gt; [jvmCmd=jvm.getCommandLine()]</InnerVar>
                <InnerVar>Vector&lt;String&gt; [connV=new Vector&lt;String&gt;()]</InnerVar>
                <InnerVar>String[] [stopcmd1=(String[])frameworkInfo[STOP_CMD1_POS]]</InnerVar>
                <InnerVar>String[] [connCmd=new String[connV.size()]]</InnerVar>
                <InnerVar>Vector&lt;String&gt; [stopV=new Vector&lt;String&gt;()]</InnerVar>
                <InnerVar>Process [prconn=Runtime.getRuntime().exec(connCmd)]</InnerVar>
                <InnerVar>TimedProcess [tp=new TimedProcess(prconn)]</InnerVar>
                <InnerVar>String[] [stopcmd2=(String[])frameworkInfo[STOP_CMD2_POS]]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>System.out;println;["Attempt to shutdown framework: " + framework]</InnerMethodInvoke>
                <InnerMethodInvoke>tp;waitFor;[timeout]</InnerMethodInvoke>
                <InnerMethodInvoke>tp;waitFor;[timeout]</InnerMethodInvoke>
                <InnerMethodInvoke>outSaver;finish;[]</InnerMethodInvoke>
                <InnerMethodInvoke>errSaver;finish;[]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>Exception</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>printFramworkInfo</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>framework</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>System.out;println;["PREFIX = " + frameworkInfo[PREFIX_POS]]</InnerMethodInvoke>
                <InnerMethodInvoke>System.out;println;["SUFFIX = " + frameworkInfo[SUFFIX_POS]]</InnerMethodInvoke>
                <InnerMethodInvoke>System.out;println;["DRIVER = " + frameworkInfo[DRIVER_POS]]</InnerMethodInvoke>
                <InnerMethodInvoke>System.out;println;["PORT = " + frameworkInfo[PORT_POS]]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getURLPrefix</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>Object[] [info=(Object[])m.get(fm)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getURLSuffix</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>Object[] [info=(Object[])m.get(fm)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getDriverName</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>Object[] [info=(Object[])m.get(fm)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>isDB2Connection</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>isNetworkServerConnection</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>isClientConnection</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>isJCCConnection</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>boolean</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>alterURL</MethodName>
            <MethodComment>/** 
 * @param fm framework name. database url from properties file
 * @return  altered url (i.e. attributes stripped for DB2 and DerbyNet)
 */
</MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>fm</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>url</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [urlPrefix="jdbc:derby:"]</InnerVar>
                <InnerVar>String [newURLPrefix=getURLPrefix(fm)]</InnerVar>
                <InnerVar>String [newURLSuffix=getURLSuffix(fm)]</InnerVar>
                <InnerVar>int [attrOffset=url.indexOf(';')]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>