<Class>
    <Id>773</Id>
    <Package>org.apache.derby.impl.sql.execute.xplain</Package>
    <ClassName>XPLAINUtil</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface></SuperInterface>
    </SuperInterfaceList>
    <ClassComment>XPLAINUtil  /** 
 * This class contains helper methods, which support the System Table Visitor. 
 */
</ClassComment>
    <FieldList>
        <Field>
            <FieldName>ISOLATION_READ_UNCOMMITED</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>ISOLATION_READ_COMMIT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>ISOLATION_REPEAT_READ</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>ISOLATION_SERIALIZABLE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>LOCK_MODE_EXCLUSIVE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>LOCK_MODE_INSTANTENOUS_EXCLUSIVE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>LOCK_MODE_SHARE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>LOCK_MODE_INSTANTENOUS_SHARE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>LOCK_GRANULARITY_TABLE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>LOCK_GRANULARITY_ROW</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_TABLESCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_INDEXSCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_HASHSCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_DISTINCTSCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_LASTINDEXKEYSCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_HASHTABLE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_ROWIDSCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_CONSTRAINTSCAN</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_JOIN_NL</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_JOIN_HASH</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_JOIN_NL_LO</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_JOIN_HASH_LO</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_UNION</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_SET</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_SET_INTERSECT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_SET_EXCEPT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_INSERT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_UPDATE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_DELETE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_CASCADE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_VTI</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_BULK</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_DISTINCT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_NORMALIZE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_ANY</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_SCROLL</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_MATERIALIZE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_ONCE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_VTI_RS</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_ROW</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_PROJECT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_FILTER</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_AGGREGATE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_PROJ_RESTRICT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_SORT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_GROUP</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_CURRENT_OF</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_ROW_COUNT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>OP_WINDOW</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SCAN_HEAP</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SCAN_BTREE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SCAN_SORT</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SCAN_BITSET_ALL</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SELECT_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SELECT_APPROXIMATE_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>INSERT_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>UPDATE_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>DELETE_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>CALL_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>DDL_STMT_TYPE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>XPLAIN_ONLY</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>XPLAIN_FULL</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SORT_EXTERNAL</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>SORT_INTERNAL</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>YES_CODE</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>NO_CODE</FieldName>
            <FieldType>String</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>getYesNoCharFromBoolean</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>test</ParamName>
                    <ParamType>boolean</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getHashKeyColumnNumberString</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>hashKeyColumns</ParamName>
                    <ParamType>int[]</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [hashKeyColumnString]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getLockModeCode</MethodName>
            <MethodComment>/** 
 * util function, to resolve the lock mode, and return a lock mode code 
 */
</MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>lockString</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getIsolationLevelCode</MethodName>
            <MethodComment>/** 
 * util function, to resolve the isolation level and return a isolation level code 
 */
</MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>isolationLevel</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getLockGranularityCode</MethodName>
            <MethodComment>/** 
 * util function, to resolve the lock granularity and return a lock granularity code 
 */
</MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>lockString</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getStatementType</MethodName>
            <MethodComment>/** 
 * This method helps to figure out the statement type and returns an appropriate return code, characterizing the stmt type.
 */
</MethodComment>
            <ReturnType>String</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>SQLText</ParamName>
                    <ParamType>String</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [type=""]</InnerVar>
                <InnerVar>String [text=SQLText.toUpperCase().trim()]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>extractScanProps</MethodName>
            <MethodComment>/** 
 * helper method which extracts the right (non-internationalzed) scan properties of the scan info properties 
 * @param descriptor the descriptor to fill with properties
 * @param scanProps the provided scan props
 * @return the filled descriptor
 */
</MethodComment>
            <ReturnType>XPLAINScanPropsDescriptor</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>descriptor</ParamName>
                    <ParamType>XPLAINScanPropsDescriptor</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>scanProps</ParamName>
                    <ParamType>Properties</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [scan_type=""]</InnerVar>
                <InnerVar>String [scan_type_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_SCAN_TYPE))]</InnerVar>
                <InnerVar>String [vp_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_PAGES_VISITED))]</InnerVar>
                <InnerVar>String [vr_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_ROWS_VISITED))]</InnerVar>
                <InnerVar>String [qr_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_ROWS_QUALIFIED))]</InnerVar>
                <InnerVar>String [fc_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_COLUMNS_FETCHED))]</InnerVar>
                <InnerVar>String [dvr_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_DELETED_ROWS_VISITED))]</InnerVar>
                <InnerVar>String [bth_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_TREE_HEIGHT))]</InnerVar>
                <InnerVar>String [bs_property=scanProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_COLUMNS_FETCHED_BIT_SET))]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>descriptor;setScan_type;[scan_type]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>extractSortProps</MethodName>
            <MethodComment>/** 
 * helper method which extracts the right (non-internationalzed) sort properties of the sort info properties object 
 * @param descriptor the descriptor to fill with properties
 * @param sortProps the provided sort props
 * @return the filled descriptor
 */
</MethodComment>
            <ReturnType>XPLAINSortPropsDescriptor</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>descriptor</ParamName>
                    <ParamType>XPLAINSortPropsDescriptor</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>sortProps</ParamName>
                    <ParamType>Properties</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [sort_type=null]</InnerVar>
                <InnerVar>String [sort_type_property=sortProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_SORT_TYPE))]</InnerVar>
                <InnerVar>String [ir_property=sortProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_ROWS_INPUT))]</InnerVar>
                <InnerVar>String [or_property=sortProps.getProperty(MessageService.getTextMessage(SQLState.STORE_RTS_NUM_ROWS_OUTPUT))]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>descriptor;setSort_type;[sort_type]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getAVGNextTime</MethodName>
            <MethodComment>/** 
 * Compute average, avoiding divide-by-zero problems.
 * @param dividend the long value for the dividend (the whole next time)
 * @param divisor the long value for the divisor (the sum of all rows seen)
 * @return the quotient or null
 */
</MethodComment>
            <ReturnType>Long</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>dividend</ParamName>
                    <ParamType>long</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>divisor</ParamName>
                    <ParamType>long</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>