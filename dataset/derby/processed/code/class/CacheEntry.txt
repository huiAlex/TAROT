cach entri mutex reentrant lock cacheabl count remov set ident mutex condit callback lock wait ident set unlock set ident complet access unkeep unkeep remov set cacheabl cacheabl valid set callback free block current thread grant exclus access entri block entri cacheabl initi code set ident complet call object cacheabl initi befor method call return immedi entri lock exclus access befor method call method wait releas lock reobtain wake give exclus access notifi entri initi cacheabl complet method call code cacheabl set ident code code cacheabl creat ident code call increas count entri entri remov cach param access code true code notifi entri callback object access normal becaus call creat find find cach otherwis don notifi callback object decrement count entri entri remov cach count check entri return code true code object unkeep entri wait thread method thread request remov entri defin contract code cach manag remov code respons caller ensur onli singl thread execut method object org apach derbi iapi servic cach cach manag remov set cach object held entri param cacheabl code null code entri remov return cach object held entri return cach object entri check entri hold valid object hold null code cacheabl code complet set ident return code true code entri hold valid object set callback object notifi replac algorithm action perform cach object param callback object clear entri notifi replac algorithm code cacheabl code reus class repres entri cach code concurr cach code thread invok ani method class code lock code call code lock code ensur exclus access entri thread hold lock entri follow state uniniti entri object construct initi state code valid code return code fals code wherea code code return code true code order prevent remov entri initi entri state call code lock ident set code block code set ident complet code call unkept state entri object refer code cacheabl code count code valid code return code true code code code return code fals code state code cacheabl code return null valu unkept state count posit code code return code true code remov entri remov cach state code valid code code code return code fals code code cacheabl code return code null code entri enter remov state transit ani state prevent deadlock thread normal lock onli entri time case legitim hold lock entri instanc entri evict room entri case exact entri uniniti state uniniti entri lock befor lock entri request 