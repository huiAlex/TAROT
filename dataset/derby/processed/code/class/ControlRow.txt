control row version left sibl page number sibl page number parent page number level root btree page row scratch row fetch desc search result hint fals search result format bit set format bit set format bit set format bit set format bit set format bit set format bit set control row control row btree page level parent root control row page version set version version left sibl btree set left sibl leftsib sibl open btree set sibl rightsib getleft sibl page number getright sibl page number parent page number set parent parent level set level newlevel root set root root conglom format open btree page number page number wait open btree page number control row page page releas search entri param search entri param compar index row page key indexpag slot indexrow key compar col partial key order asc desc compar index row key indexrow key compar col partial key order asc desc check generic btree parent check page check row order btree parent compar row sibl btree left sib sib check sibl btree link btree target unlink btree page row check consist btree parent check page left child btree child btree control row init leftmost leaf rightmost leaf search search param number control row column search left btree search btree shrink btree key split open btree templat parentpag row flag print tree btree aux object invalid row templat open btree debug page open btree string arg constructor control row page call constructor monitor creat control row dynam format constructor control row part alloc page fill field doe write anywher chang constructor probabl requir chang correspond accessor param btree static inform btree param page page describ control row param parent parent page page null page root maintain parent link param root page root tree standard standard polici constructor control row exist page field fill valu fault page necessari class extend control row deleg constructor overrid chang constructor probabl requir chang correspond accessor param open param page page describ control row standard standard polici version control row return version control row fault page necessari return version control row standard standard polici set version control row set version control row updat memori control row disk copi standard standard polici control row page left sibl null left sibl probabl leftmost page level sinc left travers index level deadlock prone method onli left sibl latch wait wait error latch request wait standard standard polici return control row page sibl unlik left sibl wait sibl latch sinc left deadlock free order standard standard polici page number left sibl fault valu hasn standard standard polici page number sibl fault valu hasn standard standard polici page number parent maintain note intent control row parent page tree code travers tree consist check standard standard polici format inform row page return format inform row page fault page necessari return format row page standard standard polici control row page tree return control row correct type page leaf control row branch control row standard standard polici control row page latch page obtain wait els return null standard standard polici releas control row resourc search index page method veri perform sensit intent object alloc occur dure execut method method perform binari search page find entri page entri key entri result search fill pass param structur param param paramet search standard thrown raw store oper search paramet compar order row consid compar col return depend row indexrow equal greater key key column present compar col case column partial key match correspond column index row valu pass partial key order return caller pass partial key order index row match partial key consid greater partial key consid routin onli read object page multi part key differ column subsequ column read param indexpag controlrow page target row param slot slot control row param indexrow templat target row row index param key possibl partial search key param compar col number column compar param partial key order return partial key match param asc desc column sort order inform throw standard level problem perform consist check common page deriv control row leaf branch page check menu page parent argument actual parent level page level parent row page order left sibl exist level page page left sibl sibl sibl left sibl row left sibl row page row sibl row page menu note realli onli true duplic key standard standard polici check row page order key previous key standard standard polici perform check sibl page level page mutual link togeth key sibl page order standard standard polici link page target page entri page target latch exit page target remain latch method care acquir page left order avoid deadlock standard standard polici unlink page sibl method give return fals run risk deadlock entri page latch sibl latch unlatch dure oper exit page remain latch unlink sibl dealloc odd situat page return latch dealloc intent abl reus page latch releas caller read inform standard standard polici row return object array repres control row raw store fetch insert updat return row check consist page children return number page throw error inconsist return identifi open conglomer param btree open btree associ latch lock param parent parent page page null page root maintain parent link param check page consist check page option break latch protocol standard standard polici return left child pointer page leaf page don children overrid return null return page leftmost child page param btree open btree associ latch lock standard standard polici return child pointer page leaf page don children overrid return null return page rightmost child page param btree open btree associ latch lock standard standard polici perform page specif initi current page leftmost leaf tree return true current page leftmost leaf tree els return fals standard standard polici current page rightmost leaf tree return true current page rightmost leaf tree els return fals standard standard polici perform recurs search ultim return latch leaf page row slot key belong slot return result structur key exist page result exact field true otherwis result exact field fals row slot return immedi preced posit key belong standard standard polici number column control row control row share column defin class add column control row instanc branch control row add child page pointer field return total number column control row search return left leaf page perform recurs search ultim return leftmost leaf page leaf page leaf sibl chain method call leaf page return leftmost leaf page param btree open btree associ latch lock standard standard polici search return leaf page perform recurs search ultim return rightmost leaf page leaf page leaf sibl chain method call leaf page return rightmost leaf page param btree open btree associ latch lock standard standard polici perform recurs shrink oper key method return true caller remov correspond entri page routin guarante success shrink anyth page lead key turn empti time shrink shrink give deadlock current implement shrink execut hold exclus lock entir tabl expect call intern transact call post commit thread latch releas code raw store guarante dealloc page xact transact commit note tabl level lock implement hold latch page affect transact entri current page latch exit page unlatch standard standard polici perform top split pass room key row perform split subsequ call insert argument index row find room sinc latch releas client code case anoth user grab space avail split pass readi anoth split return page number newli alloc leaf page creat split param open btree open btree associ latch param templat scratch area search split pass param parentpag parent page current page split pass start null root param row key room dure split pass param flag flag direct point split chosen standard standard polici recurs print tree start current node tree standard standard polici call page evict cach rollback happen page possibl chang control row valu aux object aux object invalid return templat read data row current page default implement row conglomer templat class alter templat differ instanc branch row add extra field return newli alloc templat standard standard polici dump complet inform control row row page return string info standard standard polici standard string concis print info control row doe includ anyth page base class leaf branch control row concurr note access control row serial exclus latch page control row page latch control row control row unlatch control row releas control row releas list code arrang fault field row necessari mani field control row rare left sibl parent accessor fault column onli request alloc appropri object call fetch slot onli fetch request field current field control row store storabl simplic bit hold long page number mani hold version level root flag appropri storag format valu implement reli exist page auxiliari pointer object version control row control row control row releas 