log file fid store format id saniti manag log trace null saniti manag dump log onli null saniti manag derbi storag log dump start null log sync statist log buffer size durabl test mode sync fals log switch interv checkpoint interv data directori log storag factori log flush log log posit flush log file number boot time log file number log file number max log file number log counter current checkpoint checkpoint instant checkpoint daemon client number checkpoint daemon call log written check point raw store factori data factori read onli master factori replic master mode fals replic slave mode fals replic slave replic slave pre mode fals slave recoveri monitor read file number log databas encrypt recoveri true checkpoint fals redo fals log switch fals stop fals log devic log sync fals log archiv fals log switch requir fals test log written test num record fill log mon flush call mon sync call mon num log flush wait mon log sync statist mon num byte log corrupt frozen jbms version disk major version disk minor version disk beta checksum write sync fals jvm sync error check fals log file backup backup progress fals saniti manag null saniti manag null saniti manag derbi test unittest partial log write null saniti manag null saniti manag null saniti manag null saniti manag derbi test unittest record fill log null saniti manag test max log file number null action activ file file activ perm type format log file mark corrupt origin error check corrupt logger set raw store factori rsf recov checkpoint rsf wait checkpoint tran cptran rsf wait flush flush verifi log format log file number verifi log format log number init log file newlog number prev log record instant switch log file flush buffer file number posit truncat log checkpoint truncat log log log checkpoint write control file log control file valu read control file log control file start param creat log directori creat data warn file log directori canon log path control file mirror control file log file filenumb find checkpoint checkpoint instant logger open scan start stop open scan stop open flush scan start group open scan start stop log file filenumb log file posit log instant support start param boot creat start param log storag factori stop delet obsolet logfil servic servic immedi log factori properti set perform work context append log record data offset length option data option data offset option data length current instant posit log file number log instant flush file number posit sync file raf open flush scan start open scan start stop databas encrypt set databas encrypt encrypt flush log start log file checkpoint log file delet log file checkpoint log file encrypt cleartext offset length ciphertext output offset decrypt ciphertext offset length cleartext output offset encrypt block size encrypt data length length unflush instant unflush instant long freez persist store unfreez persist store log archiv check version requir major version requir minor version check version requir major version requir minor version featur log err msg msg log err msg log err msg durabl test mode sync print error stack logtest append partial log record data offset length option data option data offset option data length test log full log file simul corrupt filenum replic master mode enabl log archiv mode disabl log archiv mode delet onlin archiv log file start log backup dir backup log file dir log file backup log backup dir abort log backup checkpoint cinstant redo undo start replic master role master factori stop replic master role stop replic slave role check replic log initi replic slave role failov slave restor log properti pre alloc log file log open log file write mode log file log dir path log dir check jvm sync error log file priv exist file priv delet file priv random access file file perm priv output stream writer file priv write file priv mkdir file priv list file priv list file priv copi file priv copi file priv remov directori file run boolean action action file set posit posit run string context servic monitor find servic modul servic modul factori interfac servic modul servic modul factori interfac full upgrad start param version info return format identifi constructor onc log factori mark corrupt raw store shut log factori awar raw store factori belong recov raw store consist state log implement log stream log record store flat file recoveri pass redo undo redo pass redo pass reconstruct state rawstor repeat exact happen befor record log undo pass undo pass incomplet transact roll order start oldest synchron provid caller raw store boot method guarante onli method call assum singl thread access field loggabl redo file logger redo standard standard derbi error polici checkpoint raw store onli checkpoint place ani time step checkpoint switch log file possibl freez log transit log file flush current log file creat flush log file file number higher previous log file log file becom current log file unfreez log start checkpoint transact gather interest inform raw store current log instant redo earliest activ transact tran log record instant undo truncat set client raw store replic clean buffer cach log checkpoint log record rep point undo redo commit checkpoint transact synchron write control file checkpoint log record log instant checkpoint becom current checkpoint somewher log file checkpoint log record guarente log truncat earliest log record determin rep point undo whichev earlier everi log file log file number smaller earliest log record log file number delet transact follow state checkpoint consid log contin stream seri log file sake clariti mark transact checkpoint start undo redo truncat log checkpoint log record onli period interest befor undo undo redo redo transact start termin dure redo onli log record xact transact phase undo redo xact log record transact transact start undo termin ani transact termin xact undo word transact span dure redo xact log record xact transact transact start dure redo xact log record xact transact transact dure redo xact log record undo loser transact roll transact transact checkpoint checkpoint action start time checkpoint log record onli written buffer cach flush note ani time elaps undo redo creat period interest standard encount checkpoint param rsf raw store factori checkpoint param data factori checkpoint param transact factori checkpoint param wait exist checkpoint progress wait true routin wait checkpoint complet anoth checkpoint wait finish befor return checkpoint pre start transact param rsf raw store factori checkpoint param data factori checkpoint param transact factori checkpoint param wait exist checkpoint progress wait true routin wait checkpoint complet anoth checkpoint wait finish befor return standard derbi standard error polici flush unwritten log record log instanc indic disk sync check databas frozen corrupt wrapper method param flush log standard standard derbi error polici flush unwritten log record disk sync check databas frozen corrupt wrapper method standard standard derbi error polici verifi log file format version log file number global variabl param log file log file param number log file number return true log file current version correct format standard standard derbi error polici verifi log file format version log file number log file posit set unsaf caller synchron param log log file param number log file number return true log file current version correct format standard standard derbi error polici initi log correct format version log file number log file empti initi file synchron written disk synchorn provid caller param newlog log file initi param number log file number param prev log record instant posit previous log record return true log file empti els fals log file access initi switch log file possibl log factori singl thread log file switch log frozen durat switch flush unwritten log record log instanc indic disk sync wrapper method param posit flush log fail flush log rid unnecessari log file onli truncat log place ani time synchron rid unnecessari log file param log log file number oldest log file recoveri return oldest log file recoveri return log file undo oldest log record uncommit transact checkpoint checkpoint return indic log record necessari care write valu control file safe write data write data file everi time write control data write checksum file chanc system crash write file checksum find control file hose mirror file control data written check point comment file log control file format synchron caller creat directori transact log standard standard error polici creat readm file log directori warn user touch ani file directori throw standard return control file read onli return mirror control file read onli log file number return file read onli scan start posit read onli access log standard standard derbi error polici scan log read onli access log standard standard derbi error polici log factori open flush scan standard ooop scan start posit read onli param start start start log otherwis start scan start param stop null stop log instant inclus otherwis stop log access log standard standard derbi error polici open log file posit file scan switch log file read onli databas slave replic mode onli assum onli recov call method initi replic slave role call slave replic chang current implement fail standard standard derbi error polici access log posit read onli handl log file posit state posit read onli return null file doe exist wrong format access log posit standard standard derbi error polici boot log factori caller provid synchron standard log factori start stop log factori caller provid synchron call data factori tran factori stop append length byte data log prepend long log instant follow byte length inform method synchron ensur log record ad sequenti log singl thread log factori log record append time standard log full current log instant log instant log record written method synchron ensur alway point log record middl return current log file number method synchron middl chang swith log file valid log instant log file synchron flush log log record written instant posit guarante disk onli flush place ani time singl thread log factori log frozen standard sync log file util routin call sync input file descriptor open scan transact log read onli standard standard derbi polici scan standard standard derbi error polici inherit doc raw store factori encrypt standard standard derbi error polici raw store factori decrypt standard standard derbi error polici return encrypt block size dure encrypt creation return length data multipl encrypt block size base length block cipher algorithm blowfish requir input exact multipl block size instant record flush onli work run recoveri time backup restor stop send log record log stream standard standard derbi error polici backup restor start send log record log stream standard standard derbi error polici backup restor log archiv directori log archiv mode enabl return true els fals check databas upgrad requir level order store featur param requir major version requir databas engin major version param requir minor version requir databas engin minor version return true databas upgrad requir level fals otherwis check databas upgrad requir level order store featur param requir major version requir databas engin major version param requir minor version requir databas engin minor version param featur null throw null return state version match return code true code databas upgrad requir level code fals code otherwis standard databas requir version code featur code featur code null code print error messag user log inform onli print error messag user log inform onli case boot error databas boot derbi system durabl test previous ani time boot mode mention error messag error probabl becaus derbi system durabl set dont wast time resolv issu case inform onli print stack trace throwabl includ nest param trace start error write partial log record append log record shutdown databas befor anoth log record written databas recover simul log full condit set true properti indic number time function call befor simul log full condit rais set default log record log file simul log corrupt determin replic master mode start log unlog oper enabl return true master replic mode turn unlog oper log fals master replic mode turn unlog oper log redo checkpoint dure rollforward recoveri throw org apach derbi iapi error standard log factori pass log record master factori everi time log record append log disk notifi master factori log disk flush place param master factori master factori servic respons control master side replic behaviour standard standard derbi polici thrown replic startup error onli thrown replic attempt start readon databas thrown stop log factori pass log record master factori notifi master factori log disk flush place stop slave function log factori call method caus thread current recoveri stop recoveri process throw standard state onli databas shutdown throw standard standard derbi polici org apach derbi impl slave databas log access file check replic master role therebi send log record master factori param log log access file replic master role iff databas master initi log log receiv replic master append log file normal log file log record append set part recoveri process databas boot replic slave mode howev recoveri point log initi databas longer slave mode sinc log append log record receiv master log set replic slave mode method find log record log file highest number log set log record append file posit flush variabl set point file normal part recoveri log file switch result appli log receiv master recoveri read includ current log file file number log file number note method call log file boot complet current ensur becaus raw store boot start slave factori turn call method log factori boot complet race condit log file number occur chang standard standard derbi error polici slave stop append log record complet recoveri boot databas function restor log base follow attribut specifi connect attribut creat databas backup doe exist attribut delet databas exist restor backup attribut perform rollforward recoveri log directori everyth els replac copi backup log file backup copi exist onlin log directori case databas directori remov directori java restor servic properti log directori remov case log directori exist becaus fail databas alreadi exist case log directori remov onli creat log directori doe exist copi log file includ control file exist backup tri restor databas onlin log directori open log file write file open write sync mode disabl write sync mode open file mode java newer rws rwd mode random access file support earli version mac free support rws rwd work method attempt detect open exist file rws mode fail derbi fall mode log file follow explicit sync log note import rws test rwd thrown open file sync doe place detail param log file inform log file open return true error detect fals otherwis standard standard derbi set posit log posit won spill log privileg lookup context servic privat user code call entri point privileg monitor lookup privat user code call entri point privileg startup privat user code call entri point privileg modul lookup privat user code call entri point privileg startup privat user code call entri point implement log circular file system file support increment log backup media recoveri onli crash recoveri support log stream log record log implement seri number log file number log file logic continu transact log record span multipl log file singl log record span log file log file number monoton increas log belong log factori raw store current implement raw store onli log factori raw store onli log compos multipl log file ani time log factori onli write log record log file log file call current log file log file log log number dat everytim checkpoint log file creat subsequ log record log file checkpoint useless log file delet raw store expos checkpoint method client call checkpoint automat raw store log file grow size configur default byte raw store shutdown checkpoint hasn raw store recov checkpoint hasn log factori respons format kind file log file log control file respons format log record wrapper format log control file derbi format derbi purpos log control file inform log file present checkpoint log record locat derbi upgrad derbi disk layoutint format int obsolet log file version long log instant log counter complet checkpoint logfil counter posit int derbi major version int derbi minor version int subvers revis build number byte flag beta flag test durabl flag byte spare byte spare byte spare long spare valu set long checksum control data written derbi format format log file derbi format derbi purpos log file log record record chang databas complet transact log compos seri log file derbi upgrad derbi disk layoutint format format log file int obsolet log file version long log file number number order log file seri form complet transact log long prev log record log instant previous log record previous log file log record wrapper log record wrapper int marker valu log record wrapper length log record therefor int fuzzi int valu case log file recov ani incomplet log record set derbi format format log record wrapper derbi format format impli derbi purpos log record wrapper provid inform log scan derbi upgrad derbi disk layoutlength int length log record scan instant long log instant log record log record byte length byte array written file logger length int length log record scan derbi format multithread log factori safe class final method privileg block implement privileg action 