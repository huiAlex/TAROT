storag factori servic line don put anyth line home canon home protocol storag factori class root storag factori separ char storag factori servic protocol storag factori class storag factori storag factori instanc home databas temp dir uniqu priv storag factori instanc home databas temp dir uniqu type boot time servic servic properti servic default properti save servic properti servic properti replac creat data warn file save servic properti servic properti resolv servic properti file spf recreat servic root servic properti creat servic root delet exist vet servic storag factori servic directori path remov servic root servic canon servic user servic servic servic servic servic file exist file storag factori class protocol lead monitor accur path file return true persist servic storag factori fals initi storag factori instanc param home true databas absolut databas directori relat home directori defin properti file param databas databas directori doe includ protocol null storag factori onli deal directori databas param temp dir temporari file directori set properti null default directori databas separ temporari file directori avoid collis param uniqu uniqu creat temporari file directori databas null temporari file creat storag factori instanc return initi storag factori creat databas directori doe exist creat creat databas doe exist directori type servic directori persist servic type return list directoi system directori persist servic boot time servic open servic properti directori identifi servic return properti object null servic doe repres valid servic standard servic valid properti creat standard properti save persist servic creat data warn file save servic properti dure backup param servic backup locat servic param properti properti save standard properti save resolv situat failur condit left servic properti file servic properti file backup inconsist state note method doesn resolv situat current servic properti file backup file param storag factori servic param spf servic properti file throw standard file oper servic properti file fail properti save verifi servic directori befor object databas alreadi exist check specifi file exist param file file check return code true file exist code fals throw secur requir privileg storag factori implement persist servic return storag factori class return protocol lead servic return empti string protocol default persist servic subsub protocol follow colon otherwis privileg monitor lookup privat user code call entri point helper method return effort accur path param file file path return file path ala code file canon path code file path class implement persist servic interfac storag factori class handl protocol cach 