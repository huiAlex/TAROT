alloc page store format id alloc page number alloc page offset reserv reserv reserv reserv extent borrow space store page store page raw store factori saniti manag null type format alloc page max free space creat page ident arg creat extent page num page size page alloc availspac init data ident write page ident read alloc page header updat alloc page header read extent offset write extent offset write info info epag creat read info info epag free page number pnum add page mycontain page number ntt user handl dealloc page user handl page number updat unfil page info input extent add free page alloc page alloc page offset chain alloc page alloc handl alloc page num alloc page offset alloc page number pagenum max pagenum prealloc pagenum page status page number set page status instant page number status chain alloc page instant alloc page num alloc page offset compress space instant highest page num page truncat undo compress space instant highest page num page truncat string alloc extent pre alloc page pre alloc threshold pre alloc size compress ntt return format identifi creat alloc page standard standard polici initi memori structur buffer page data standard page read correct inconsist write page standard page written write inform inform area param info inform param epag alloc page data fulli form guarente big cover area inhibit info param creat creat write length info els check epag origin info length standard standard derbi error polici extract inform epag param info put extract inform param epag alloc page inform epag fulli form guarente big cover area inhibit info return free page number page number add page manag alloc page return page number newli ad page thread awar latch param mycontain futur alloc page call grow creat sync multipl page onc param ntt nest top action alloc transact comit befor user transact param user handl handl open user transact user handl latch page remain latch commit user transact guarente empti page standard page ad actual page alloc dealloc ree log oper chang page status status standard page alloc chain page number offset log record standard standard derbi error polici compress free page compress free page rang maintain alloc page page compress onli page alloc page compress param instant log address oper param highest page highest page alloc page number offset page array page maintain alloc page instanc valu indic page truncat page truncat offset set param num page truncat number alloc page alloc page prior truncat note page highest page highest page num page truncat standard standard polici handl undo compress space oper return copi alloc extent cach care maintain coher invalid cach befor ani updat prealloc user page param object param pre alloc threshold start prealloc threshold param pre alloc size prealloc number page compress empti page call extent updat data structur bit map contigu free page extent longer exist similar prealloc oper unlog forc chang extent befor actual remov space file sequenc updat extent data structur forc extent chang disk truncat page system crash chang disk system crash extra page file extent doe case prealloc code alreadi hand handl ani set page intend page truncat alloc actual size file doe expect level lock standard standard polici alloc page file class extend normal store page hunk space borrow file store file header borrow space visibl alloc page present page data array access direct file ani chang borrow space manag alloc page reason borrow space header doe page page format alloc page extend store page disk format differ store page byte borrow page header alloc page slight bigger normal store page byte store page header record space reason whi byte simpli row becaus static access object avoid chicken egg problem object instanti alloc page object befor objectifi alloc page object instanti object befor objectifi byte store outsid normal record interfac settabl becaus onli alloc page borrow space alloc page borrow format page header byte alloc extend row slot offset |checksum| byte indic size borrow space onc alloc page initi valu chang maximum space borrow byte alloc page page size ani page alloc page file start physic byte subsequ alloc page chain alloc page offset alloc page expect manag user page page size chain sever perform hit logic physic map alloc page store previous alloc page object maintain map follow field store page header derbi format derbi purpos manag page alloc derbi upgrad derbi disk layout format int store page header store page alloc page nubmer long alloc page number alloc page offset long file offset alloc page reserv long reserv futur usag reserv long reserv futur usag reserv long reserv futur usag reserv long reserv futur usag byte size borrow info info byte content borrow info alloc extent onli extent alloc page derbi format alloc page alloc extent row cut implement onli alloc extent row alloc page alloc extent row externaliz object direct written page alloc page word convert storeabl row cut overhead enhanc perform give control size layout alloc extent row alloc page implment note creat embryon alloc page format disk spcial static function avoid instanti full alloc page object embryon alloc inform find file header els alloc page perper initi creat extent open static alloc page method read inform direct disk alloc page page alreadi page cach becaus clean alloc page introduc deadlock cach long term alloc page probabl live cach page cach page alloc page page read page cach continu follow alloc page chain alloc page manag specifi page alloc page physic offset specifi page locat clean alloc page alloc page written ani page written object provid call alloc page write current version object borrow space befor alloc page written clean object alloc page dirti clean caus call object write borrow space version independ version alloc page version store insid borrow space opaqu alloc page field alloc extent row alloc extent 