add support read lock write lock declar synchron add support read lock write lock declar synchron discuss commit feedback code import groovi transform public class resourc provid privat final map string string data hash map string string read lock public string resourc string key throw return data key write lock public void refresh throw reload resourc memori becom code import java util concurr lock reentrant read write lock import java util concurr lock read write lock public class resourc provid privat final read write lock reentrantlock reentrant read write lock privat final map string string data hash map string string public string resourc string key throw reentrantlock read lock lock tri return data key final reentrantlock read lock unlock public void refresh throw reentrantlock write lock lock tri reload resourc memori final reentrantlock write lock unlock specifi lock import groovi transform public class resourc provid privat final read write lock lock reentrant read write lock privat final map string string data hash map string string read lock lock public string resourc string key throw return data key write lock lock public void refresh throw reload resourc memori case code becom public class resourc provid privat final read write lock lock reentrant read write lock privat final map string string data hash map string string public string resourc string key throw lock read lock lock tri return data key final lock read lock unlock public void refresh throw lock write lock lock tri reload resourc memori final lock write lock unlock 