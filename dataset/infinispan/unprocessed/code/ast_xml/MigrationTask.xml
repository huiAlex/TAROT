<Class>
    <Id>3291</Id>
    <Package>org.infinispan.persistence.remote.upgrade</Package>
    <ClassName>MigrationTask</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface>DistributedCallable</SuperInterface>
        <SuperInterface>Object</SuperInterface>
    </SuperInterfaceList>
    <ClassComment></ClassComment>
    <FieldList>
        <Field>
            <FieldName>log</FieldName>
            <FieldType>Log</FieldType>
        </Field>
        <Field>
            <FieldName>THREAD_NAME</FieldName>
            <FieldType>String</FieldType>
        </Field>
        <Field>
            <FieldName>segments</FieldName>
            <FieldType>Set</FieldType>
        </Field>
        <Field>
            <FieldName>segments</FieldName>
            <FieldType>Integer</FieldType>
        </Field>
        <Field>
            <FieldName>readBatch</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>threads</FieldName>
            <FieldType>int</FieldType>
        </Field>
        <Field>
            <FieldName>deletedKeys</FieldName>
            <FieldType>ConcurrentHashSet</FieldType>
        </Field>
        <Field>
            <FieldName>deletedKeys</FieldName>
            <FieldType>WrappedByteArray</FieldType>
        </Field>
        <Field>
            <FieldName>ignoredKey</FieldName>
            <FieldType>byte[]</FieldType>
        </Field>
        <Field>
            <FieldName>stores</FieldName>
            <FieldType>Set</FieldType>
        </Field>
        <Field>
            <FieldName>stores</FieldName>
            <FieldType>RemoteStore</FieldType>
        </Field>
        <Field>
            <FieldName>cache</FieldName>
            <FieldType>Cache</FieldType>
        </Field>
        <Field>
            <FieldName>cache</FieldName>
            <FieldType>Object</FieldType>
        </Field>
        <Field>
            <FieldName>executorService</FieldName>
            <FieldType>ExecutorService</FieldType>
        </Field>
        <Field>
            <FieldName>listener</FieldName>
            <FieldType>RemoveListener</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>MigrationTask</MethodName>
            <MethodComment></MethodComment>
            <ReturnType></ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>segments</ParamName>
                    <ParamType>Integer</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>readBatch</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>threads</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>entryRemoved</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>event</ParamName>
                    <ParamType>CacheEntryRemovedEvent</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>deletedKeys;add;[new WrappedByteArray((byte[])event.getKey())]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>call</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>Integer</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>Exception</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>migrateEntriesWithMetadata</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>sourceCache</ParamName>
                    <ParamType>Object</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>counter</ParamName>
                    <ParamType>AtomicInteger</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>setEnvironment</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>cache</ParamName>
                    <ParamType>Object</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>inputKeys</ParamName>
                    <ParamType>Object</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>ComponentRegistry [cr=cache.getAdvancedCache().getComponentRegistry()]</InnerVar>
                <InnerVar>PersistenceManager [loaderManager=cr.getComponent(PersistenceManager.class)]</InnerVar>
                <InnerVar>Marshaller [marshaller=new MigrationMarshaller()]</InnerVar>
                <InnerVar>DefaultThreadFactory [threadFactory=new DefaultThreadFactory(null,1,THREAD_NAME + "-%t",null,null)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>this.cache;addFilteredListener;[listener, new RemovedFilter&lt;&gt;(), null, Util.asSet(CacheEntryRemoved.class)]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getTypeClasses</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>Class&lt;? extends MigrationTask&gt;</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>writeObject</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>output</ParamName>
                    <ParamType>ObjectOutput</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>task</ParamName>
                    <ParamType>MigrationTask</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>BitSet [bs=new BitSet()]</InnerVar>
                <InnerVar>byte[] [bytes=bs.toByteArray()]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>UnsignedNumeric;writeUnsignedInt;[output, task.readBatch]</InnerMethodInvoke>
                <InnerMethodInvoke>UnsignedNumeric;writeUnsignedInt;[output, task.threads]</InnerMethodInvoke>
                <InnerMethodInvoke>UnsignedNumeric;writeUnsignedInt;[output, bytes.length]</InnerMethodInvoke>
                <InnerMethodInvoke>output;write;[bs.toByteArray()]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>readObject</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>MigrationTask</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>input</ParamName>
                    <ParamType>ObjectInput</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>int [readBatch=UnsignedNumeric.readUnsignedInt(input)]</InnerVar>
                <InnerVar>int [threads=UnsignedNumeric.readUnsignedInt(input)]</InnerVar>
                <InnerVar>int [segmentsSize=UnsignedNumeric.readUnsignedInt(input)]</InnerVar>
                <InnerVar>byte[] [bytes=new byte[segmentsSize]]</InnerVar>
                <InnerVar>BitSet [bitSet=BitSet.valueOf(bytes)]</InnerVar>
                <InnerVar>Set&lt;Integer&gt; [segments=bitSet.stream().boxed().collect(Collectors.toSet())]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke>input;read;[bytes]</InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType>IOException</ExceptionType>
                <ExceptionType>ClassNotFoundException</ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>