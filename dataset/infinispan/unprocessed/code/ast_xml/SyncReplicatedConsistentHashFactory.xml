<Class>
    <Id>2749</Id>
    <Package>org.infinispan.distribution.ch.impl</Package>
    <ClassName>SyncReplicatedConsistentHashFactory</ClassName>
    <SuperClass></SuperClass>
    <SuperInterfaceList>
        <SuperInterface>ConsistentHashFactory</SuperInterface>
        <SuperInterface>ReplicatedConsistentHash</SuperInterface>
    </SuperInterfaceList>
    <ClassComment>SyncReplicatedConsistentHashFactory  /** 
 * {@link SyncConsistentHashFactory} adapted for replicated caches, so that the primary owner of a keyis the same in replicated and distributed caches.
 * @author Dan Berindei
 * @since 8.2
 */
</ClassComment>
    <FieldList>
        <Field>
            <FieldName>log</FieldName>
            <FieldType>Log</FieldType>
        </Field>
        <Field>
            <FieldName>OWNED_SEGMENTS_ALLOWED_VARIATION</FieldName>
            <FieldType>float</FieldType>
        </Field>
        <Field>
            <FieldName>PRIMARY_SEGMENTS_ALLOWED_VARIATION</FieldName>
            <FieldType>float</FieldType>
        </Field>
        <Field>
            <FieldName>syncCHF</FieldName>
            <FieldType>SyncConsistentHashFactory</FieldType>
        </Field>
    </FieldList>
    <MethodList>
        <Method>
            <MethodName>create</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>ReplicatedConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>hashFunction</ParamName>
                    <ParamType>Hash</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>numOwners</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>numSegments</ParamName>
                    <ParamType>int</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>members</ParamName>
                    <ParamType>Address</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>capacityFactors</ParamName>
                    <ParamType>Address</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>DefaultConsistentHash [dch=syncCHF.create(hashFunction,1,numSegments,members,null)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>fromPersistentState</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>ReplicatedConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>state</ParamName>
                    <ParamType>ScopedPersistentState</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>String [consistentHashClass=state.getProperty("consistentHash")]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>replicatedFromDefault</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>ReplicatedConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>dch</ParamName>
                    <ParamType>DefaultConsistentHash</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>int [numSegments=dch.getNumSegments()]</InnerVar>
                <InnerVar>List&lt;Address&gt; [members=dch.getMembers()]</InnerVar>
                <InnerVar>int[] [primaryOwners=new int[numSegments]]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>updateMembers</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>ReplicatedConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>baseCH</ParamName>
                    <ParamType>ReplicatedConsistentHash</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>newMembers</ParamName>
                    <ParamType>Address</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>actualCapacityFactors</ParamName>
                    <ParamType>Address</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>DefaultConsistentHash [baseDCH=defaultFromReplicated(baseCH)]</InnerVar>
                <InnerVar>DefaultConsistentHash [dch=syncCHF.updateMembers(baseDCH,newMembers,null)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>defaultFromReplicated</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>DefaultConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>baseCH</ParamName>
                    <ParamType>ReplicatedConsistentHash</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>int [numSegments=baseCH.getNumSegments()]</InnerVar>
                <InnerVar>List&lt;Address&gt;[] [baseSegmentOwners=new List[numSegments]]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>rebalance</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>ReplicatedConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>baseCH</ParamName>
                    <ParamType>ReplicatedConsistentHash</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar>DefaultConsistentHash [baseDCH=defaultFromReplicated(baseCH)]</InnerVar>
                <InnerVar>DefaultConsistentHash [dch=syncCHF.rebalance(baseDCH)]</InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>union</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>ReplicatedConsistentHash</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>ch1</ParamName>
                    <ParamType>ReplicatedConsistentHash</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>ch2</ParamName>
                    <ParamType>ReplicatedConsistentHash</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>writeObject</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>void</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>output</ParamName>
                    <ParamType>ObjectOutput</ParamType>
                </Parameter>
                <Parameter>
                    <ParamName>chf</ParamName>
                    <ParamType>SyncReplicatedConsistentHashFactory</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>readObject</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>SyncReplicatedConsistentHashFactory</ReturnType>
            <ParameterList>
                <Parameter>
                    <ParamName>unmarshaller</ParamName>
                    <ParamType>ObjectInput</ParamType>
                </Parameter>
            </ParameterList>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getId</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>Integer</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
        <Method>
            <MethodName>getTypeClasses</MethodName>
            <MethodComment></MethodComment>
            <ReturnType>Class&lt;? extends SyncReplicatedConsistentHashFactory&gt;</ReturnType>
            <ParameterList/>
            <InnerVarList>
                <InnerVar></InnerVar>
            </InnerVarList>
            <InnerMethodInvokeList>
                <InnerMethodInvoke></InnerMethodInvoke>
            </InnerMethodInvokeList>
            <ThrowExceptionList>
                <ExceptionType></ExceptionType>
            </ThrowExceptionList>
        </Method>
    </MethodList>
</Class>